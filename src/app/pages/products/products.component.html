<div class="pagetitle">
  <h1>Product List</h1>
  <!-- <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item">Tables</li>
      <li class="breadcrumb-item active">General</li>
    </ol>
  </nav> -->
</div><!-- End Page Title -->

<section class="section py-0">
  <div class="row">
    <div class="col-md-3 mb-4 align-self-center">
      <input type="text" placeholder="Search products..." class="form-control" [(ngModel)]="searchText" name="searchText"
        (keyup)="gs.getDataCount(filteredData, searchText)">
    </div>

    <div class="col-md-2 mb-4 align-self-center">
      <select class="form-control" [(ngModel)]="statusFilter" (change)="filterProducts()">
        <option value="">All Status</option>
        <option value="active">Active</option>
        <option value="inactive">Inactive</option>
        <option value="draft">Draft</option>
      </select>
    </div>

    <div class="col-md-2 mb-4 align-self-center">
      <select class="form-control" [(ngModel)]="priceFilter" (change)="filterProducts()">
        <option value="">All Prices</option>
        <option value="0-100">₹0 - ₹100</option>
        <option value="100-500">₹100 - ₹500</option>
        <option value="500-1000">₹500 - ₹1000</option>
        <option value="1000+">₹1000+</option>
      </select>
    </div>

    <div class="col-md-2 mb-4 align-self-center">
      <select class="form-control" [(ngModel)]="sortBy" (change)="sortProducts()">
        <option value="createdAt">Sort by Date</option>
        <option value="productname">Sort by Name</option>
        <option value="price">Sort by Price</option>
        <option value="discount">Sort by Discount</option>
      </select>
    </div>

    <div class="col-md-1 mb-4 align-self-center">
      <select class="form-control" [(ngModel)]="sortOrder" (change)="sortProducts()">
        <option value="desc">Desc</option>
        <option value="asc">Asc</option>
      </select>
    </div>

    <div class="col-md-2 mb-4 text-end">
      <button type="button" class="btn btn-primary rounded-pill" [routerLink]="['/product/New/Add']"
        routerLinkActive="router-link-active">+ Add</button>
    </div>

    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Products</h5>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Image</th>
                <th scope="col">Name</th>
                <th scope="col">Price</th>
                <th scope="col">Discount</th>
                <th scope="col">Brand</th>
                <th scope="col">Created Date</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <ng-container
                *ngFor="let item of filteredData | filter: searchText | paginate: { itemsPerPage: 10, currentPage: p }; index as k">
                <tr>
                  <th scope="row">{{k+1}}</th>
                  <td><img class="uploaded-image" [src]="item?.product_images?.[0]" alt="img"></td>
                  <td>{{item.productname}}</td>
                  <td>{{item.price}}</td>
                  <td>{{item.discount}}</td>
                  <td>{{item.brand}}</td>
                  <td>{{item.createdAt | date:'mediumDate'}}</td>
                  <td style="font-size : 1.5rem;">
                    <i [routerLink]="['/product', item._id , 'View']" routerLinkActive="router-link-active" title="View"
                      class="pointer bi bi-eye-fill me-2"></i>
                    <i [routerLink]="['/product', item._id , 'Edit']" title="Edit"
                      class="pointer bi bi-pencil-fill me-2"></i>
                    <i (click)="deleteProduct(item._id, k)" title="Delete" class="pointer bi bi-trash-fill"></i>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
          <br>
          <pagination-controls (pageChange)="p= $event"></pagination-controls>
        </div>
      </div>
    </div>


  </div>
</section>
